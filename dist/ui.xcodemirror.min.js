function xcodeMirrorDirective(e){return{scope:{exec:"=",options:"=?"},controller:function(e,r,o,t){e.options||(e.options={mode:"text/xml",htmlMode:!0,lineNumbers:!0,theme:"monokai"})},require:"?ngModel",restrict:"EA",template:'<textarea id="xcodeMirror"></textarea>',replace:!1,link:function(r,o,t,i){r.xcodeMirror=null,r.$watch(function(){return i.$modelValue},function(e,o){r.code!=i.$modelValue&&(r.code=i.$modelValue)});var n=function(){if(r.listenerCode&&r.listenerCode(),r.xcodeMirror){var o=r.xcodeMirror.getWrapperElement();o.parentElement.removeChild(o),o=null}e(function(){r.xcodeMirror=CodeMirror.fromTextArea(document.getElementById("xcodeMirror"),r.options),r.xcodeMirror.on("change",function(){r.code=r.xcodeMirror.getValue(),i.$setViewValue(r.code)}),r.listenerCode=r.$watch("code",function(e,o){e&&e!=r.xcodeMirror.getValue()&&r.xcodeMirror.setValue(e)})},0)};r.$watch("exec",function(e,r){n()})}}}angular.module("ui.xcodeMirror",[]).directive("xcodeMirror",xcodeMirrorDirective);